<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta content="minimum-scale=1.0, width=device-width" name="viewport">
	<meta name="format-detection" content="telephone=no">

	<title>WeDeploy™ – You Build. We Deploy.</title>

	<meta property="og:url" content="http://wedeploy.com/">
	<meta property="og:title" content="WeDeploy™ – You Build. We Deploy.">
	<meta property="og:description" content="Forget about infrastructure. Dedicate your time to what really matters: building great apps.">
	<meta property="og:image" content="http://wedeploy.com/images/open_graph.png">
	<meta property="og:image:width" content="1200">
	<meta property="og:image:height" content="630">

	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700|Roboto+Mono">
	<link rel="icon" href="/images/favicon.ico" type="image/x-icon">

	<!-- Scripts -->
	<script src="/scripts/main.js"></script>

	<!-- Styles -->
	<link rel="stylesheet" href="/styles/vendor/westyle/fonts/galano/galano.css">
	<link rel="stylesheet" href="/styles/vendor/westyle/fonts/icon-12/icon-12.css">
	<link rel="stylesheet" href="/styles/vendor/westyle/fonts/icon-16/icon-16.css">
	<link rel="stylesheet" href="/styles/vendor/tomorrow-night-eighties.css">
	<link rel="stylesheet" href="/styles/main.css?v=1">

	<!-- Senna -->
	<link rel="stylesheet" href="/styles/vendor/senna.css">
	<script src="/scripts/vendor/senna-min.js"></script>
	<script src="/scripts/navigation.js"></script>

	<!-- Analytics -->
	<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-37033501-3', 'auto');
	ga('send', 'pageview');
	</script>

	<!-- Inspectlet -->
	<script id="inspectletjs">
	window.__insp = window.__insp || [];
	__insp.push(['wid', 1302580389]);
	(function() {
	function ldinsp(){if(typeof window.__inspld != "undefined") return; window.__inspld = 1; var insp = document.createElement('script'); insp.type = 'text/javascript'; insp.async = true; insp.id = "inspsync"; insp.src = ('https:' == document.location.protocol ? 'https' : 'http') + '://cdn.inspectlet.com/inspectlet.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(insp, x); };
	setTimeout(ldinsp, 500); document.readyState != "complete" ? (window.attachEvent ? window.attachEvent('onload', ldinsp) : window.addEventListener('load', ldinsp, false)) : ldinsp();
	})();
	</script>

	<!-- Intercom -->
	<script>
		window.intercomSettings = {
			app_id: "ocvh9014"
		};
	</script>
	<script>(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/ocvh9014';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})()</script>
</head>
<body id="senna-body" data-senna data-senna-surface>
	<div id="senna-body-default">
		<div class="senna-loading-bar"></div>

		
		
	

	
	<nav class="topbar topbar-large topbar-inverse topbar-docs guide-topic guide-topic-data topbar-docs-main">
		<div class="topbar-logo">
			<a class="topbar-logo-link" href="/">
				<span class="wedeploy-logo">
					<span class="we-circle"><span class="we">We</span></span>
					<span class="deploy">Deploy™</span>
					<span class="liferay">by Liferay</span>
					<span class="alpha-container">
						<span class="arrow-up"></span>
						<span class="alpha">alpha</span>
					</span>
				</span>
			</a>
		</div>

		<ul class="topbar-list">
			<li class="topbar-item">
				<a href="/blog" class="topbar-link">Blog</a>
			</li>
			<li class="topbar-item">
				<a href="/docs" class="topbar-link topbar-link-selected">Documentation</a>
			</li>
			<li class="topbar-item">
				<a href="//chat.wedeploy.com/" class="topbar-link">Chat</a>
			</li>
			<li class="topbar-item login">
				<a href="//dashboard.wedeploy.com/login" class="topbar-link">Log in</a>
			</li>
			<li class="topbar-item get-started">
				<a href="//dashboard.wedeploy.com/signup" class="btn btn-accent btn-sm">Get Started</a>
			</li>
		</ul>
	</nav>
	

	<main class="docs guide-topic guide-topic-data">
		<nav class="sidebar">
			<a class="sidebar-header toggler-header-collapsed">
				<span class="sidebar-icon icon-16-menu"></span>
				<span>Docs Menu</span>
				<span class="sidebar-icon-right">
					<span class="icon-12-arrow-down-short"></span>
					<span class="icon-12-arrow-up-short"></span>
				</span>
			</a>
			<ul class="sidebar-list sidebar-list-1 toggler-collapsed">
				<li class="sidebar-item">
					<form class="sidebar-search" action="/docs/search/" method="GET" enctype="multipart/form-data">
						<div class="form-group">
							<div class="input-inner-addon input-inner-addon-right">
								<input name="q" class="form-control" type="text" placeholder="Search Docs" autocomplete="off" data-topic="data" required>
								<span class="input-inner-icon-helper icon-16-magnifier"></span>
							</div>
						</div>
					</form>
				</li>
				<li class="sidebar-item">
					<a class="sidebar-link" href="/docs/">
						<span class="sidebar-icon icon-16-house"></span>
						<span>Docs Home</span>
					</a>
				</li>
				<li class="sidebar-item">
					<a class="sidebar-link" href="/docs/intro/">
						<span class="sidebar-icon icon-16-arrow-right-rod"></span>
						<span>Intro</span>
					</a>
					<ul class="sidebar-list sidebar-list-2 hidden">
						<li class="sidebar-item">
							<a class="sidebar-link " href="/docs/data/">
								<span>What, Why and How</span>
							</a>
							<a class="sidebar-link " href="/docs/data/feature-overview.html">
								<span>Feature Overview</span>
							</a>
							<a class="sidebar-link " href="/docs/data/using-the-dashboard.html">
								<span>Using the Dashboard</span>
							</a>
							<a class="sidebar-link " href="/docs/data/environment-variables.html">
								<span>Environment Variables</span>
							</a>
							<a class="sidebar-link " href="/docs/data/configuration-files.html">
								<span>Configuration Files</span>
							</a>
							<a class="sidebar-link " href="/docs/data/custom-domains.html">
								<span>Custom Domains</span>
							</a>
							<a class="sidebar-link " href="/docs/data/using-the-command-line.html">
								<span>Using the Command-line</span>
							</a>
							<a class="sidebar-link " href="/docs/data/using-the-api-client.html">
								<span>Using the API Client</span>
							</a>
						</li>
					</ul>
				</li>
				<li class="sidebar-item">
					<a class="sidebar-link" href="/docs/auth/js/">
						<span class="sidebar-icon icon-16-persons"></span>
						<span>Auth</span>
					</a>
					<ul class="sidebar-list sidebar-list-2 hidden">
						<li class="sidebar-item">
							<a class="sidebar-link " href="/docs/data/js/">
								<span>Getting Started</span>
							</a>
							<a class="sidebar-link " href="/docs/data/js/manage-users.html">
								<span>Manage Users</span>
							</a>
							<a class="sidebar-link " href="/docs/data/js/sign-in-with-facebook.html">
								<span>Sign-in With Facebook</span>
							</a>
							<a class="sidebar-link " href="/docs/data/js/sign-in-with-github.html">
								<span>Sign-in With GitHub</span>
							</a>
							<a class="sidebar-link " href="/docs/data/js/sign-in-with-google.html">
								<span>Sign-in With Google</span>
							</a>
							<a class="sidebar-link " href="/docs/data/js/sign-in-with-password.html">
								<span>Sign-in With Password</span>
							</a>

						</li>
					</ul>
				</li>
				<li class="sidebar-item">
					<a class="sidebar-link" href="/docs/data/js">
						<span class="sidebar-icon icon-16-database"></span>
						<span>Data</span>
					</a>
					<ul class="sidebar-list sidebar-list-2 ">
						<li class="sidebar-item">
							<a class="sidebar-link " href="/docs/data/js/">
								<span>Getting Started</span>
							</a>
							<a class="sidebar-link sidebar-link-selected" href="/docs/data/js/configuring-data.html">
								<span>Configuring Data</span>
							</a>
							<a class="sidebar-link " href="/docs/data/js/saving-data.html">
								<span>Saving Data</span>
							</a>
							<a class="sidebar-link " href="/docs/data/js/updating-data.html">
								<span>Updating Data</span>
							</a>
							<a class="sidebar-link " href="/docs/data/js/deleting-data.html">
								<span>Deleting Data</span>
							</a>
							<a class="sidebar-link " href="/docs/data/js/retrieving-data.html">
								<span>Retrieving Data</span>
							</a>
							<a class="sidebar-link " href="/docs/data/js/searching-data.html">
								<span>Searching Data</span>
							</a>
							<a class="sidebar-link " href="/docs/data/js/real-time-feeds.html">
								<span>Real-time Feeds</span>
							</a>
						</li>
					</ul>
				</li>
				<li class="sidebar-item">
					<a class="sidebar-link" href="/docs/email/js/">
						<span class="sidebar-icon icon-16-mail-full"></span>
						<span>Email</span>
					</a>
					<ul class="sidebar-list sidebar-list-2 hidden">
						<li class="sidebar-item">
							<a class="sidebar-link " href="/docs/data/js/">
								<span>Getting Started</span>
							</a>
						</li>
					</ul>
				</li>
				<li class="sidebar-item">
					<a class="sidebar-link" href="/docs/hosting/">
						<span class="sidebar-icon icon-16-folder"></span>
						<span>Hosting</span>
					</a>
					<ul class="sidebar-list sidebar-list-2 hidden">
						<li class="sidebar-item">
							<a class="sidebar-link " href="/docs/data/">
								<span>Getting Started</span>
							</a>
						</li>
					</ul>
				</li>
				<li class="sidebar-item">
					<a class="sidebar-link" href="/docs/other/">
						<span class="sidebar-icon icon-16-module"></span>
						<span>Other</span>
					</a>
					<ul class="sidebar-list sidebar-list-2 hidden">
						<li class="sidebar-item">
							<a class="sidebar-link " href="/docs/data/">
								<span>Getting Started with Liferay</span>
							</a>
						</li>
						<li class="sidebar-item">
							<a class="sidebar-link " href="/docs/data/nodejs.html">
								<span>Getting Started with Node.js</span>
							</a>
						</li>
						<li class="sidebar-item">
							<a class="sidebar-link " href="/docs/data/ruby.html">
								<span>Getting Started with Ruby</span>
							</a>
						</li>
						<li class="sidebar-item">
							<a class="sidebar-link " href="/docs/data/java.html">
								<span>Getting Started with Java</span>
							</a>
						</li>

					</ul>
				</li>
			</ul>
		</nav>

		<div class="sidebar-offset">
			
	<nav class="topbar topbar-large topbar-inverse topbar-docs guide-topic guide-topic-data topbar-docs-aux">
		<div class="topbar-logo">
			<a class="topbar-logo-link" href="/">
				<span class="wedeploy-logo">
					<span class="we-circle"><span class="we">We</span></span>
					<span class="deploy">Deploy™</span>
					<span class="liferay">by Liferay</span>
					<span class="alpha-container">
						<span class="arrow-up"></span>
						<span class="alpha">alpha</span>
					</span>
				</span>
			</a>
		</div>

		<ul class="topbar-list">
			<li class="topbar-item">
				<a href="/blog" class="topbar-link">Blog</a>
			</li>
			<li class="topbar-item">
				<a href="/docs" class="topbar-link topbar-link-selected">Documentation</a>
			</li>
			<li class="topbar-item">
				<a href="//chat.wedeploy.com/" class="topbar-link">Chat</a>
			</li>
			<li class="topbar-item login">
				<a href="//dashboard.wedeploy.com/login" class="topbar-link">Log in</a>
			</li>
			<li class="topbar-item get-started">
				<a href="//dashboard.wedeploy.com/signup" class="btn btn-accent btn-sm">Get Started</a>
			</li>
		</ul>
	</nav>
	
			<header class="guide-header">
				<div class="container-hybrid">
					<h1 class="guide-header-title">Data <span>Guide</span></h1>
				</div>
			</header>
			<div class="container-hybrid">
				<div class="docs-guide row">
					
					<!-- <div class="guide-topics-container">
						<div class="guide-topics btn-group">
							<a href="/docs/data/js/configuring-data.html" class="btn btn-default btn-active">
								JavaScript
							</a>
							<a href="/docs/data/rest/configuring-data.html" class="btn btn-default ">
								REST
							</a>
						</div>
					</div> -->
					

					<div class="docs-content col-xs-16 col-md-9">
						<h1 id="configuring-data">Configuring Data</h1>
<h6 id="the-api-json-and-api-json-files-allow-us-to-configure-the-accessible-paths-for-each-data-service-">The <code>api.json</code> and <code>api-*.json</code> files allow us to configure the accessible paths for each data service.</h6>
<article id="undestanding-configuration-files">
<h2 id="understanding-configuration-files">Understanding configuration files</h2>
<p>By default WeDeploy Data service is going to use all the JSON files starting with <code>api-*</code> and also the file <code>api.json</code>.</p>
<p>These files are used to help you manage features such as path validation, authentication, and params validation.</p>
<p>The api JSON files are located at the same path of the <code>./container.json</code> and are used following the ordering filesystem.</p>
</article>
<article id="json-attributes">
<h2 id="json-attributes">JSON attributes</h2>
<p>After understanding how the api configuration files work, it&#39;s time to learn what are the supported attributes:</p>
<table class="table">
  <tr>
    <th>Field</th> <th>Description</th>
  </tr>
  <tr>
    <td>path</td> <td>The path that represents the collection used to handle the request data.</td>
  </tr>
  <tr>
    <td>data</td> <td>Tells the service if the request to a collection should be stored or not.</td>
  </tr>
  <tr>
    <td>description</td> <td>Used to describe the behavior of an endpoint.</td>
  </tr>
  <tr>
    <td>auth</td> <td>Used to define authentication rules for the endpoint.</td>
  </tr>
  <tr>
    <td>method</td> <td>HTTP method allowed for the request.</td>
  </tr>
  <tr>
    <td>parameters</td> <td>Parameters and validation rules for the collection.</td>
  </tr>
</table>

<h5 id="path">path</h5>
<p>A path represents the resource used to store your project data.</p>
<pre><code>[
  {
    &quot;path&quot;: &quot;/movies/:movieId&quot;
  },
  {
    &quot;path&quot;: &quot;/fruits/*&quot;
  }
]
</code></pre><h5 id="data">data</h5>
<p>You can create endpoints just for validation, in this case, data is used to finish the request in case you just need a validation or want to store the request in the collection.</p>
<pre><code class="lang-json">[
  {
    &quot;path&quot;: &quot;/fruits/*&quot;,
    &quot;data&quot;: true
  }
]
</code></pre>
<h5 id="description">description</h5>
<p>Used to describe the behavior of an endpoint.</p>
<pre><code class="lang-json">[
  {
    &quot;description&quot;: &quot;Returns actors of a movie&quot;,
    &quot;path&quot;: &quot;/movies/:movieId/actors&quot;,
    &quot;method&quot;: &quot;GET&quot;
  }
]
</code></pre>
<h5 id="auth">auth</h5>
<p>You can unauthorized applications and users to access any endpoint by using the auth field. The example below verify if the application is authenticated in order to perform the request:</p>
<pre><code class="lang-json">[
  {
    &quot;path&quot;: &quot;/movies/*&quot;,
    &quot;auth&quot;: {
      &quot;validator&quot;: &quot;$auth != null&quot;
    }
  }
]
</code></pre>
<h5 id="method">method</h5>
<p>Specifies the HTTP method used for the request. In the example bellow, it allows a GET request and if you try to do a PUT or DELETE the route will not be recognized and will fail.</p>
<pre><code class="lang-json">[
  {
    &quot;path&quot;: &quot;/moives/:movieId&quot;,
    &quot;data&quot;: true,
    &quot;method&quot;: &quot;GET&quot;
  }
]
</code></pre>
<h5 id="parameters">parameters</h5>
<p>You generally would use <code>parameters</code> to force validation in order to make sure that the params sent to a collection follow predefined rules.</p>
<pre><code class="lang-json">[
  {
    &quot;description&quot;: &quot;Creates a new movie&quot;,
    &quot;path&quot;: &quot;/movies&quot;,
    &quot;method&quot;: &quot;POST&quot;,
    &quot;parameters&quot;: {
      &quot;title&quot;: {
        &quot;type&quot;: &quot;string&quot;
      }
    },
    &quot;data&quot;: true
  }
]
</code></pre>
</article>
<article id="allowing-usage-of-all-the-collections">
<h2 id="allowing-usage-of-all-the-collections">Allowing usage of all the collections</h2>
<p>In order to freely use any collection with any kind of operation, you just need to add the following content in your <code>api.json</code>.</p>
<pre><code class="lang-json">[
  {
    &quot;path&quot;: &quot;/*&quot;,
    &quot;data&quot;: true
  }
]
</code></pre>
<p>The path <code>/*</code> tells the data service to allow any request to the base path of the data service.</p>
</article>
<article id="validating-resources">
<h2 id="validating-resources">Validating resources</h2>
<p>The Validator script will be executed in an environment where several request and server data will be available. In this environment, there are several global variables available to you that can be used to validate the request parameter, body, or even to authorize the request.</p>
<p>The validator can be used as an integration with the Auth service:</p>
<pre><code class="lang-json">{
  &quot;path&quot;: &quot;/movies/*&quot;,
  &quot;auth&quot;: {
    &quot;validator&quot;: &quot;$auth != null&quot;
  }
}
</code></pre>
<p>The global variables are:</p>
<table class="table">
  <tr>
    <th>Variable</th> <th>Description</th>
  </tr>
  <tr>
    <td>$auth</td> <td>The authenticated user of this request. If the request was not authenticated, it will be null.</td>
  </tr>
  <tr>
    <td>$config</td> <td>The raw JSON data stored in the service&#39;s config.json file.</td>
  </tr>
  <tr>
    <td>$session</td> <td>All stored session data. If the request had no session cookie, it will be an empty map for the new session created for this request.</td>
  </tr>
  <tr>
    <td>$params</td> <td>The request params as they were loaded from url query and request body. All query and form parameters will be strings here.</td>
  </tr>
  <tr>
    <td>$values</td> <td>The parsed request params, as they are used for parameter validation. All query and form parameters will be parsed to JSON values.</td>
  </tr>
  <tr>
    <td>$body</td> <td>The parsed request body, according to the request Content-Type.</td>
  </tr>
  <tr>
    <td>$data</td> <td>The data view for this request, if a data path is mounted in the API path, and the request path represents a key to access any data resource (collection, document or inner field from a document). It will be null otherwise.</td>
  </tr>

</table>

<p>Some common validators are:</p>
<p>1) Authenticated users only:</p>
<pre><code class="lang-text">$auth !== null
</code></pre>
<p>2) Mixed with dynamic values:</p>
<pre><code class="lang-text">$auth.id === $params.id
</code></pre>
<p>3) Validate new data value agains old one:</p>
<pre><code class="lang-text">$body.timestamp &gt; $data.timestamp
</code></pre>
<p>4) Multiple contitional validation:</p>
<pre><code class="lang-text">$auth !== null &amp;&amp; $auth.id === $params.id
</code></pre>
</article>
<h2 id="what-s-next-">What&#39;s next?</h2>
<p>Now that you have <em>WeDeploy™ Data</em> API settled up, you can interact <a href="/docs/data/js/saving-data.html">saving data</a>.</p>


						<div class="guide-feedback">
							<p>Was this section helpful?</p>
							<button class="btn btn-accent guide-feedback-btn guide-feedback-btn-yes">Yes</button>
							<button class="btn btn-accent guide-feedback-btn guide-feedback-btn-no">No</button>
						</div>
						<div class="guide-github">
							<div class="guide-github-img">
								<img src="/images/misc/octocat.png" alt="Octocat"v>
							</div>
							<div class="guide-github-text">
								<p>Contribute to this Doc on Github! <a href="https://github.com/wedeploy/docs/edit/master/data/js/configuring-data.md" class="docs-github-link" target="_blank">Edit this section</a>.</p>
							</div>
						</div>
					</div>
					<nav class="col-xs-16 col-md-offset-2 col-md-5">
						<div class="docs-nav-container">
							<div class="docs-nav">
								<div id="reading-container"></div>
							</div>
						</div>
					</nav>
				</div>
			</div>
			<div class="newsletter">
				<div class="container-hybrid">
					<div class="row">

						<h2 class="newsletter-subtitle">Couldn't find what you want?</h1>
						<p class="newsletter-description">Don't worry, we're constantly working on improvements. Stay tuned!</p>

						<form autocomplete="off" class="row newsletter-form">
							<div class="col-md-7 col-md-offset-3 col-xs-16">
								<div class="form-group">
									<input class="form-control" name="email" type="email" placeholder="Your email address" required>
								</div>
							</div>
							<div class="col-md-3 col-xs-16">
								<input class="btn btn-accent btn-block" type="submit" value="Submit">
							</div>
						</form>

					</div>
				</div>
			</div>
		</div>
	</main>

		
	<script data-senna-track="temporary" src="/scripts/vendor/highlight.pack.min.js"></script>

	<script data-senna-track="temporary" src="/scripts/misc/newsletter.js"></script>
	<script data-senna-track="temporary" src="/scripts/misc/guide.js"></script>
	<script data-senna-track="temporary" src="/scripts/misc/menu.js"></script>

	</div>
</body>
</html>
